{"version":3,"sources":["plugins/validate.js"],"names":[],"mappings":";;;;;;;;mCAAgB,uBAAuB;;;;oCACtB,wBAAwB;;;;sCACd,6BAA6B;;;;AAExD,IAAI,QAAQ,GAAG;AACb,UAAQ,EAAC,kBAAC,MAAM,EAAE,OAAO,EAAE,IAAI,EAAE;AAC/B,UAAM,CAAC,KAAK,CAAC;AACX,YAAM,EAAE,MAAM;AACd,UAAI,EAAE,WAAW;AACjB,YAAM,EAAE;AACN,gBAAQ,EAAE;AACR,iBAAO,EAAE,EAAE,UAAU,EAAE,KAAK,EAAE;AAC9B,iBAAO,EAAE,oCAAe,MAAM;SAC/B;OACF;AACD,aAAO,EAAC,iBAAC,GAAG,EAAE,KAAK,EAAE;AACnB,YAAI,QAAQ,GAAG,GAAG,CAAC,OAAO,CAAA;AAC1B,YAAI,QAAQ,CAAC,QAAQ,IAAI,CAAC,oCAAe,aAAa,CAAC,QAAQ,CAAC,QAAQ,CAAC,EAAE;AACzE,iBAAO,KAAK,CAAC,kCAAK,UAAU,CAAC,qBAAqB,CAAC,CAAC,CAAA;SACrD;;AAED,aAAK,CAAC,EAAC,OAAO,EAAE,uBAAuB,EAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAA;OACpD;KACF,CAAC,CAAA;;AAEF,QAAI,EAAE,CAAA;GACP;CACF,CAAA;;AAED,QAAQ,CAAC,QAAQ,CAAC,UAAU,GAAG;AAC7B,MAAI,EAAE,UAAU;AAChB,SAAO,EAAE,OAAO;CACjB,CAAA;;qBAEc,QAAQ","file":"plugins/validate.js","sourcesContent":["import Joi from 'hapi/node_modules/joi'\nimport Boom from 'hapi/node_modules/boom'\nimport formValidation from '../common/formvalidation.js'\n\nvar validate = {\n  register (server, options, next) {\n    server.route({\n      method: 'POST',\n      path: '/validate',\n      config: {\n        validate: {\n          options: { abortEarly: false },\n          payload: formValidation.schema\n        }\n      },\n      handler (req, reply) {\n        var userData = req.payload\n        if (userData.birthday && !formValidation.checkBirthday(userData.birthday)) {\n          return reply(Boom.badRequest('Age is less than 18'))\n        }\n        \n        reply({message: 'Validation successful'}).code(200)\n      }\n    })\n\n    next()\n  }\n}\n\nvalidate.register.attributes = {\n  name: 'validate',\n  version: '1.0.0'\n}\n\nexport default validate\n"],"sourceRoot":"/source/"}